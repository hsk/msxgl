#include "msxgl.h"
#include "stdint.h"
#include "dos.h"
#include "stdio.h"
int putchar(int c){
    DOS_CharOutput(c);
    return 1;
}

//#include <stdint.h>
//#include <stdio.h>
//#include <stdlib.h>
//#include <math.h>

typedef uint8_t u8;
typedef int8_t s8;
typedef uint16_t u16;
typedef int16_t s16;
typedef int32_t s32;
typedef uint32_t u32;

const char dt[]={
2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,
2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,
2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,
2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,
2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,
2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,
2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,
2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,
2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,
2,2,2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,
2,2,2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,2,
2,2,2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,1,2,
2,2,2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,2,2,
2,2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,2,2,2,
2,2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,1,2,2,2,
2,2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,2,2,2,2,
2,2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,2,2,2,2,2,
2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,1,2,2,2,2,2,
2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,2,2,2,2,2,2,
2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,
2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,
2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,2,2,2,2,2,2,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,
2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,1,2,2,2,2,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,
2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,2,2,2,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,
2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,2,2,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,
2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,
2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,
2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,2,1,1,1,1,1,1,1,1,2,2,2,2,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,
2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,2,1,1,1,1,1,1,1,1,2,2,2,2,2,1,1,1,1,1,1,1,1,2,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,
2,2,2,2,2,2,1,1,1,1,1,1,1,1,1,2,1,1,1,1,1,1,1,1,1,2,2,2,2,1,1,1,1,1,1,1,1,2,2,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,
2,2,2,2,2,2,1,1,1,1,1,1,1,1,2,2,2,1,1,1,1,1,1,1,1,2,2,2,1,1,1,1,1,1,1,1,1,2,2,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,
2,2,2,2,2,2,1,1,1,1,1,1,1,1,2,2,2,1,1,1,1,1,1,1,1,2,2,2,1,1,1,1,1,1,1,1,2,2,2,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,
2,2,2,2,2,2,1,1,1,1,1,1,1,1,2,2,2,1,1,1,1,1,1,1,1,2,2,2,1,1,1,1,1,1,1,1,2,2,2,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,
2,2,2,2,2,1,1,1,1,1,1,1,1,1,2,2,2,1,1,1,1,1,1,1,1,1,2,2,1,1,1,1,1,1,1,1,2,2,2,2,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,
2,2,2,2,2,1,1,1,1,1,1,1,1,2,2,2,2,2,1,1,1,1,1,1,1,1,2,1,1,1,1,1,1,1,1,1,2,2,2,2,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,
2,2,2,2,2,1,1,1,1,1,1,1,1,2,2,2,2,2,1,1,1,1,1,1,1,1,2,1,1,1,1,1,1,1,1,2,2,2,2,2,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,
2,2,2,2,2,1,1,1,1,1,1,1,1,2,2,2,2,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,
2,2,2,2,1,1,1,1,1,1,1,1,2,2,2,2,2,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,
2,2,2,2,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,
2,2,2,2,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,2,2,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,
2,2,2,2,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,2,2,2,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,
2,2,2,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,1,2,2,2,2,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,
2,2,2,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,2,2,2,2,2,2,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,
2,2,2,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,
2,2,2,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,
2,2,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,2,2,2,2,2,2,
2,2,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,1,2,2,2,2,2,
2,2,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,2,2,2,2,2,
2,2,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,2,2,2,2,
2,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,1,2,2,2,
2,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,2,2,2,
2,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,2,2,
2,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,1,2,
1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,2,
1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,    
2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,
2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,
2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,
2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,
2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,
2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,
2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,
2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,
2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,
};
const s8 sins[32]={0,3,6,8,11,13,14,15,15,15,14,13,11,8,6,3,0,-3,-6,-8,-11,-13,-14,-15,-15,-15,-14,-13,-11,-8,-6,-3,};
const s8 coss[32]={16,15,14,13,11,8,6,3,0,-3,-6,-8,-11,-13,-14,-15,-15,-15,-14,-13,-11,-8,-6,-3,0,3,6,8,11,13,14,15,};
// 何をするプログラムなのかと言うと画像データを回転して出力するだけ。
char buf[32*8];
#define SIN(N) sins[N]
#define COS(N) coss[N]
s16 dy,dx;
u8* p;
void f1(s16 y1,s16 x1) {
    s8 v,y2,x2;
    u8 i=32;
    do{
        v = 0;
        {
            y2=y1>>8;
            if(y2&~63){}else{
                x2=x1>>8;
                if(x2 & 128){}else v=dt[x2+(y2<<7)]<<4;
            }
        }
        x1+=dx,y1+=dy;
        {
            y2=y1>>8;
            if(y2&~63){}else{
                x2=x1>>8;
                if(x2 & 128){}else v|=dt[x2+(y2<<7)];
            }
        }
        *p=v;
        i--;
        if(i==0) break;
        p+=8;x1+=dx;y1+=dy;		
    }while(1);
}
#define LD_IXH_A .db #0xdd,#0x67
#define LD_IXH_B .db #0xdd,#0x60
#define LD_IXH_C .db #0xdd,#0x61
#define LD_IXH_D .db #0xdd,#0x62
#define LD_IXH_E .db #0xdd,#0x63
#define LD_IXH_IXH .db #0xdd,#0x64
#define LD_IXH_IXL .db #0xdd,#0x65
#define LD_IXL_A .db #0xdd,#0x6f
#define LD_IXL_B .db #0xdd,#0x68
#define LD_IXL_C .db #0xdd,#0x69
#define LD_IXL_D .db #0xdd,#0x6a
#define LD_IXL_E .db #0xdd,#0x6b
#define LD_IXL_IXH .db #0xdd,#0x6c
#define LD_IXL_IXL .db #0xdd,#0x6d
#define LD_L_IX(D) .db #0xdd,#0x6e,D

#define LD_A_IXH .db #0xdd,#0x7C
#define LD_B_IXH .db #0xdd,#0x44
#define LD_C_IXH .db #0xdd,#0x4C
#define LD_D_IXH .db #0xdd,#0x54
#define LD_E_IXH .db #0xdd,#0x5C

#define LD_A_IXL .db #0xdd,#0x7D
#define LD_B_IXL .db #0xdd,#0x45
#define LD_C_IXL .db #0xdd,#0x4D
#define LD_D_IXL .db #0xdd,#0x55
#define LD_E_IXL .db #0xdd,#0x5D
#define LD_IYH_A .db #0xfd,#0x67
#define LD_IYH_B .db #0xfd,#0x60
#define LD_IYH_C .db #0xfd,#0x61
#define LD_IYH_D .db #0xfd,#0x62
#define LD_IYH_E .db #0xfd,#0x63
#define LD_IYH_IYH .db #0xfd,#0x64
#define LD_IYH_IYL .db #0xfd,#0x65
#define LD_IYL_A .db #0xfd,#0x6F
#define LD_IYL_B .db #0xfd,#0x68
#define LD_IYL_C .db #0xfd,#0x69
#define LD_IYL_D .db #0xfd,#0x6A
#define LD_IYL_E .db #0xfd,#0x6B
#define LD_IYL_IYH .db #0xfd,#0x6C
#define LD_IYL_IYL .db #0xfd,#0x6D
#define LD_A_IYH  .db #0xfd,#0x7c
#define LD_B_IYH  .db #0xfd,#0x44
#define LD_C_IYH  .db #0xfd,#0x4c
#define LD_D_IYH  .db #0xfd,#0x54
#define LD_E_IYH  .db #0xfd,#0x5c
#define ADD_A_IYH .db #0xfd,#0x84
#define LD_A_IYL  .db #0xfd,#0x7d
#define LD_B_IYL  .db #0xfd,#0x45
#define LD_C_IYL  .db #0xfd,#0x4d
#define LD_D_IYL  .db #0xfd,#0x55
#define LD_E_IYL  .db #0xfd,#0x5d
#define ADD_A_IYL .db #0xfd,#0x85

#define USEIX
#define USEIY
#ifdef USEIX
  #define LDAX1L LD_A_IXL
  #define LDX1LA LD_IXL_A
  #define LDX1LE LD_IXL_E

#else
  #define LDALOOPCNT LD_A_IYL
  #define LDLOOPCNTA LD_IYL_A
#endif
#ifdef USEIY
  #define LDAV   LD_A_IYH
  #define LDVA   LD_IYH_A
  #define LDALOOPCNT LD_A_IYL
  #define LDLOOPCNTA LD_IYL_A
#else
#endif

u8 x1l;


void f3(s16 y1,s16 x1) {
    #define X1H d
    #define X1L e
    #define Y1H b
    #define Y1L c
    __asm
    push	ix
    ld	Y1L, l
    ld	Y1H, h
;tes:98: do{
    ld a,#0x20
    LDLOOPCNTA
00115$:
;tes:99: v = 0;
    ld a,#0
    LDVA
;tes:101: y2=y1>>8;
    ld	a, Y1H
;tes:102: if(y2&~63)
    and	a, #0xc0
    jr	NZ, 00106$
;tes:105: x2=x1>>8;
    ld	a, X1H
;tes:106: if(x2 & 128)
    bit	7, a
    jr	NZ, 00106$
;tes:109: v=dt[x2+(y2<<7)];
    ld	l, #0    ;2/7
    ld	h, Y1H   ;1/4
    rr	h        ;1/4
    rr  l        ;1/4

    ld a,X1H
    LD_IXL_E
    ld e,X1H
    ld	d, #0
    add	hl, de
    ld	de, #_dt
    add	hl, de
    LD_E_IXL
    ld X1H,a
    ld	a, (hl)
;tes:110: v = v<<4;
    add	a, a ; 1/4
    add	a, a ; 1/4
    add	a, a ; 1/4
    add	a, a ; 1/4
    LDVA
00106$:
;tes:114: x1+=dx;
    ld hl,(#_dx) ;5/16
    add	hl,de    ;3/11
    ld d,h       ;1/4
    ld e,l       ;1/4
;tes:115: y1+=dy;
    ld hl,(#_dy) ;5/16
    add	hl,bc    ;3/11
    ld Y1H,h       ;1/4
    ld Y1L,l       ;1/4
                 ;10/35
    ld a,Y1H
;tes:117: y2=y1>>8;
;tes:118: if(y2&~63)
    and	a, #0xc0
    jr	NZ, 00112$
;tes:122: x2=x1>>8;
    ld	a, X1H
;tes:123: if(x2 & 128)
    bit	7, a
    jr	NZ, 00112$
;tes:126: v|=dt[x2+(y2<<7)];
    ld	l, #0    ;2/7
    ld	h, Y1H   ;1/4
    rr	h        ;1/4
    rr  l        ;1/4

    ld a,X1H
    LD_IXL_E
    ld e,X1H
    ld	d, #0
    add	hl, de
    ld	de, #_dt
    add	hl, de
    ld X1H,a
    LD_E_IXL
    LDAV
    ld	l, (hl)
    or	a, l
    LDVA
00112$:
;tes:130: *p=v;
    ld	hl, (_p);5/16
    LDAV		;1/4
    ld	(hl), a ;2/7
;tes:131: i--;
    LDALOOPCNT	;1/4
    dec a		;1/4
    LDLOOPCNTA	;1/4
;tes:132: if(i==0)
    or	a, a
    jr	Z, 00118$
;tes:136: p+=8;
    ld	hl, #_p ;3/10
    ld	a, (hl)
    add	a, #0x08
    ld	(hl), a
    jr	NC, 00160$
    inc	hl
    inc	(hl)
00160$:
;tes:137: x1+=dx;
    ld hl,(#_dx) ;5/16
    add	hl,de    ;3/11
    ld d,h       ;1/4
    ld e,l       ;1/4
;tes:138: y1+=dy;
    ld hl,(#_dy) ;5/16
    add	hl,bc    ;3/11
    ld b,h       ;1/4
    ld c,l       ;1/4
                 ;10/35
;tes:140: while(1);
    jp	00115$
00118$:
;tes:141: }
    pop	ix
    ret
    __endasm;
}
void run(){
    u8 sita;
    s16 nx,ny;
    VDP_RegWriteBakMask(10,~128,0);
    for(u8 s=1;s<=32;s++){
        sita = (-s) & 31;
        // sitaだけ回転する
        nx =  128/2*256 - ((COS(sita)<<5) + SIN(sita)*8*3/2)*s*2;
        ny =  64/2*256 - ((-SIN(sita)<<5) + COS(sita)*8*3/2)*s*2;
        // 移動分はどのくらいか
        dx =  COS((-sita)&31)*s*2;
        dy =  SIN((-sita)&31)*s*2;
        /*
        for(u8 y=0;y<8;y++,nx-=dy,ny+=dx) {p=&buf[y];f3(ny,nx);}
        __asm di __endasm; VDP_WriteVRAM_16K(buf,0x800,32*8);__asm ei __endasm;
        */
        for(u8 y=0;y<8;y++,nx-=dy,ny+=dx) {p=&buf[y];f3(ny,nx);}
        __asm di __endasm;VDP_WriteVRAM_16K(buf,0x800+32*8*1,32*8);__asm ei __endasm;
        for(u8 y=0;y<8;y++,nx-=dy,ny+=dx) {p=&buf[y];f3(ny,nx);}
        __asm di __endasm;VDP_WriteVRAM_16K(buf,0x800+32*8*2,32*8);__asm ei __endasm;
        for(u8 y=0;y<8;y++,nx-=dy,ny+=dx) {p=&buf[y];f3(ny,nx);}
        __asm di __endasm;VDP_WriteVRAM_16K(buf,0x800+32*8*3,32*8);__asm ei __endasm;
        /*
        for(u8 y=0;y<8;y++,nx-=dy,ny+=dx) {p=&buf[y];f3(ny,nx);}
        __asm di __endasm;VDP_WriteVRAM_16K(buf,0x800+32*8*4,32*8);__asm ei __endasm;
        for(u8 y=0;y<8;y++,nx-=dy,ny+=dx) {p=&buf[y];f3(ny,nx);}
        __asm di __endasm;VDP_WriteVRAM_16K(buf,0x800+32*8*5,32*8);__asm ei __endasm;
        */
    }
    VDP_RegWriteBakMask(10,255,128);
    for(u8 s=32,i=32;i<=64+32;i+=3){
        sita = (-s) & 31;
        // sitaだけ回転する
        nx =  128/2*256 - ((COS(sita)<<5) + SIN(sita)*8*3/2)*(64+32-i);
        ny =  64/2*256 - ((-SIN(sita)<<5) + COS(sita)*8*3/2)*(64+32-i);
        // 移動分はどのくらいか
        dx =  COS((-sita)&31)*(64+32-i);
        dy =  SIN((-sita)&31)*(64+32-i);
        for(u8 y=0;y<8;y++,nx-=dy,ny+=dx) {p=&buf[y];f3(ny,nx);}
        __asm di __endasm;VDP_WriteVRAM_16K(buf,0x800+32*8*1,32*8);__asm ei __endasm;
        for(u8 y=0;y<8;y++,nx-=dy,ny+=dx) {p=&buf[y];f3(ny,nx);}
        __asm di __endasm;VDP_WriteVRAM_16K(buf,0x800+32*8*2,32*8);__asm ei __endasm;
        for(u8 y=0;y<8;y++,nx-=dy,ny+=dx) {p=&buf[y];f3(ny,nx);}
        __asm di __endasm;VDP_WriteVRAM_16K(buf,0x800+32*8*3,32*8);__asm ei __endasm;
    }
}
void run3(){
    u8 sita;
    s16 nx,ny;
    VDP_RegWriteBakMask(10,~128,0);
    for(u8 s=1;s<=64;s++){
        sita = (-s) & 31;
        // sitaだけ回転する
        nx =  128/2*256 - ((COS(sita)<<5) + SIN(sita)*8*3/2)*s*2;
        ny =  64/2*256 - ((-SIN(sita)<<5) + COS(sita)*8*3/2)*s*2;
        // 移動分はどのくらいか
        dx =  COS((-sita)&31)*s*2;
        dy =  SIN((-sita)&31)*s*2;
        /*
        for(u8 y=0;y<8;y++,nx-=dy,ny+=dx) {p=&buf[y];f3(ny,nx);}
        __asm di __endasm; VDP_WriteVRAM_16K(buf,0x800,32*8);__asm ei __endasm;
        */
        for(u8 y=0;y<8;y++,nx-=dy,ny+=dx) {p=&buf[y];f3(ny,nx);}
        __asm di __endasm;VDP_WriteVRAM_16K(buf,0x800+32*8*1,32*8);__asm ei __endasm;
        for(u8 y=0;y<8;y++,nx-=dy,ny+=dx) {p=&buf[y];f3(ny,nx);}
        __asm di __endasm;VDP_WriteVRAM_16K(buf,0x800+32*8*2,32*8);__asm ei __endasm;
        for(u8 y=0;y<8;y++,nx-=dy,ny+=dx) {p=&buf[y];f3(ny,nx);}
        __asm di __endasm;VDP_WriteVRAM_16K(buf,0x800+32*8*3,32*8);__asm ei __endasm;
        /*
        for(u8 y=0;y<8;y++,nx-=dy,ny+=dx) {p=&buf[y];f3(ny,nx);}
        __asm di __endasm;VDP_WriteVRAM_16K(buf,0x800+32*8*4,32*8);__asm ei __endasm;
        for(u8 y=0;y<8;y++,nx-=dy,ny+=dx) {p=&buf[y];f3(ny,nx);}
        __asm di __endasm;VDP_WriteVRAM_16K(buf,0x800+32*8*5,32*8);__asm ei __endasm;
        */
    }
    VDP_RegWriteBakMask(10,255,128);
    for(u8 i=32;i<=64+64;i+=8){
        sita = (0) & 31;
        // sitaだけ回転する
        nx =  128/2*256 - ((COS(sita)<<5) + SIN(sita)*8*3/2)*(64+64-i);
        ny =  64/2*256 - ((-SIN(sita)<<5) + COS(sita)*8*3/2)*(64+64-i);
        // 移動分はどのくらいか
        dx =  COS((-sita)&31)*(64+64-i);
        dy =  SIN((-sita)&31)*(64+64-i);
        for(u8 y=0;y<8;y++,nx-=dy,ny+=dx) {p=&buf[y];f3(ny,nx);}
        __asm di __endasm;VDP_WriteVRAM_16K(buf,0x800+32*8*1,32*8);__asm ei __endasm;
        for(u8 y=0;y<8;y++,nx-=dy,ny+=dx) {p=&buf[y];f3(ny,nx);}
        __asm di __endasm;VDP_WriteVRAM_16K(buf,0x800+32*8*2,32*8);__asm ei __endasm;
        for(u8 y=0;y<8;y++,nx-=dy,ny+=dx) {p=&buf[y];f3(ny,nx);}
        __asm di __endasm;VDP_WriteVRAM_16K(buf,0x800+32*8*3,32*8);__asm ei __endasm;
    }
}

void run2(){
    u8 sita;
    s16 nx,ny;
    VDP_RegWriteBakMask(10,~128,0);
    for(u8 s=1;s<=32;s++){
        sita = (s*2) & 31;
        // sitaだけ回転する
        nx =  128/2*256 - ((COS(sita)<<5) + SIN(sita)*8*3/2)*s*2;
        ny =  64/2*256 - ((-SIN(sita)<<5) + COS(sita)*8*3/2)*s*2;
        // 移動分はどのくらいか
        dx =  COS((-sita)&31)*s*2;
        dy =  SIN((-sita)&31)*s*2;
        /*
        for(u8 y=0;y<8;y++,nx-=dy,ny+=dx) {p=&buf[y];f3(ny,nx);}
        __asm di __endasm; VDP_WriteVRAM_16K(buf,0x800,32*8);__asm ei __endasm;
        */
        for(u8 y=0;y<8;y++,nx-=dy,ny+=dx) {p=&buf[y];f3(ny,nx);}
        __asm di __endasm;VDP_WriteVRAM_16K(buf,0x800+32*8*1,32*8);__asm ei __endasm;
        for(u8 y=0;y<8;y++,nx-=dy,ny+=dx) {p=&buf[y];f3(ny,nx);}
        __asm di __endasm;VDP_WriteVRAM_16K(buf,0x800+32*8*2,32*8);__asm ei __endasm;
        for(u8 y=0;y<8;y++,nx-=dy,ny+=dx) {p=&buf[y];f3(ny,nx);}
        __asm di __endasm;VDP_WriteVRAM_16K(buf,0x800+32*8*3,32*8);__asm ei __endasm;
        /*
        for(u8 y=0;y<8;y++,nx-=dy,ny+=dx) {p=&buf[y];f3(ny,nx);}
        __asm di __endasm;VDP_WriteVRAM_16K(buf,0x800+32*8*4,32*8);__asm ei __endasm;
        for(u8 y=0;y<8;y++,nx-=dy,ny+=dx) {p=&buf[y];f3(ny,nx);}
        __asm di __endasm;VDP_WriteVRAM_16K(buf,0x800+32*8*5,32*8);__asm ei __endasm;
        */
    }
    VDP_RegWriteBakMask(10,255,128);
    for(u8 s=32,i=32;i<=64+32;i+=4){
        sita = (-s) & 31;
        // sitaだけ回転する
        nx =  128/2*256 - ((COS(sita)<<5) + SIN(sita)*8*3/2)*(64+32-i);
        ny =  64/2*256 - ((-SIN(sita)<<5) + COS(sita)*8*3/2)*(64+32-i);
        // 移動分はどのくらいか
        dx =  COS((-sita)&31)*(64+32-i);
        dy =  SIN((-sita)&31)*(64+32-i);
        for(u8 y=0;y<8;y++,nx-=dy,ny+=dx) {p=&buf[y];f3(ny,nx);}
        __asm di __endasm;VDP_WriteVRAM_16K(buf,0x800+32*8*1,32*8);__asm ei __endasm;
        for(u8 y=0;y<8;y++,nx-=dy,ny+=dx) {p=&buf[y];f3(ny,nx);}
        __asm di __endasm;VDP_WriteVRAM_16K(buf,0x800+32*8*2,32*8);__asm ei __endasm;
        for(u8 y=0;y<8;y++,nx-=dy,ny+=dx) {p=&buf[y];f3(ny,nx);}
        __asm di __endasm;VDP_WriteVRAM_16K(buf,0x800+32*8*3,32*8);__asm ei __endasm;
    }
}
#define DI __asm di __endasm;
#define EI __asm ei __endasm;

int main() {
    VDP_SetColor(0);
    VDP_ClearVRAM();
    VDP_SetMode(VDP_MODE_SCREEN3);
    VDP_SetPaletteEntry(0,RGB16(0,2,6));
    VDP_SetPaletteEntry(1,RGB16(5,5,7));
    VDP_SetPaletteEntry(2,RGB16(1,1,2));
    VDP_RegWriteBak(4,1); VDP_RegWriteBak(2,0);
    while(1) {
        for(u8 j=0;j<8;j++) {
            for(u8 k=0;k<128;k++) buf[k]=(k & 31)+(j<<5);
            DI; VDP_WriteVRAM_16K(buf,j<<7,128); EI;
        }
        run();
        for(u8 j=0;j<8;j++) {
            for(u8 k=0;k<128;k++) buf[k]=(k & 31)+((((j%3)+1)&7)<<5);
            DI; VDP_WriteVRAM_16K(buf,j<<7,128); EI;
        }
        run2();
        for(u8 j=0;j<8;j++) {
            for(u8 k=0;k<128;k++) buf[k]=(k & 15)+8+((((j%3)+1)&7)<<5);
            DI; VDP_WriteVRAM_16K(buf,j<<7,128); EI;
        }
        run3();
    }
    return 0;
}
